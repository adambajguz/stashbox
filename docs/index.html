<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stashbox - Documentation</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple-dark.css">
  <link rel="stylesheet" href="//unpkg.com/@fortawesome/fontawesome-free/css/all.min.css" />
  <link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
  <div id="app"></div>
  <script>
    window.$docsify = {
      loadSidebar: true,
      loadNavbar: true,

      maxLevel   : 2,
      subMaxLevel: 2,

      name: 'Stashbox',
      nameLink: '/stashbox',
      logo: 'assets/images/icon.png',

      repo: 'z4kn4fein/stashbox',
      auto2top: true,

      coverpage: true,
      homepage: 'getting-started/overview.md',

      pagination: {
        crossChapter: true,
        crossChapterText: true,
      },

      copyCode: {
        buttonText : '<i class="fas fa-copy"></i>',
      },

      search: {
        depth: 3,
        noData: 'No results!',
        placeholder: 'Search...'
      },

      alias: {
        '/.*/_sidebar.md': '/_sidebar.md',
        '/.*/_navbar.md': '/_navbar.md',
        '.*?/changelog': 'https://raw.githubusercontent.com/z4kn4fein/stashbox/master/CHANGELOG.md',
      },

      formatUpdated: function (time) {
        let date = new Date(time);
        return date.toLocaleDateString();
      },

      onlyCover: true,

      plugins: [
        function (hook, vm) {
          hook.beforeEach(function (html) {
            if (/CHANGELOG\.md/.test(vm.route.file)) {
              return html;
            } else if (/githubusercontent\.com/.test(vm.route.file)) {
              url = vm.route.file
                .replace('raw.githubusercontent.com', 'github.com')
                .replace(/\/master/, '/blob/master')
            } else {
              url = 'https://github.com/z4kn4fein/stashbox/edit/master/docs/' + vm.route.file
            }
            var editHtml = '[:fab fa-github: Edit this page on GitHub](' + url + ') - <span class="last-modified">*(modified: {docsify-updated})*</span>\n\n'
            return editHtml + html;
          })
        },

        function (hook, vm) {
          hook.beforeEach(function(content,next) {
            if(window.location.hash.match(/_glossary/g)){
              next(content);
              return;
            }

            let addLinks = function(content,next,terms){
              for (let term in terms){
                let link = ` [$1](/_glossary?id=${terms[term]})`;
                let re = new RegExp(`\\ (${term})`,'ig');
                content = content.replace(re,link);
              }
              next(content);
            }

            if(!window.$docsify.terms){
              fetch('_glossary.md').then(function(data){
                data.text().then(function(text){
                  window.$docsify.terms = {};
                  let lines = text.split('\n');
                  lines.forEach(function(line){
                    if(line.match(/##/g)){
                      let title = line.replace('##','').trim();
                      let id = title.toLowerCase().replaceAll(' | ','-').replaceAll(' ','-');
                      title.split('|').forEach(function(term) {
                        window.$docsify.terms[term.trim()] = id;
                      });                 
                    }
                  });

                  addLinks(content,next,window.$docsify.terms);
                })
              })
            } else{
              addLinks(content,next,window.$docsify.terms);
            }
          })
        },
      ]
    }
  </script>
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-themeable@0/dist/js/docsify-themeable.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-tabs@1/dist/docsify-tabs.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code@2/dist/docsify-copy-code.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-pagination@2/dist/docsify-pagination.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-csharp.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-example-panels@1/dist/docsify-example-panels.min.js"></script>
  <script src="//unpkg.com/docsify-fontawesome/dist/docsify-fontawesome.min.js"></script>
</body>
</html>
